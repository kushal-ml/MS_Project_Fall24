2025-03-08 12:02:19,685 - __main__ - INFO - Successfully connected to Neo4j database
2025-03-08 12:02:20,095 - __main__ - INFO - Current database stats - Nodes: 0, Relationships: 0
2025-03-08 12:02:20,096 - __main__ - INFO - Neo4j free tier limits - Nodes: 200000, Relationships: 250000
2025-03-08 12:02:20,098 - __main__ - ERROR - Fatal error: Can't instantiate abstract class UMLSProcessorEmbeddings with abstract methods preprocess_data, process_dataset, validate_data
2025-03-08 12:02:20,099 - __main__ - INFO - UMLS processing with embeddings completed
2025-03-08 12:08:02,157 - __main__ - INFO - Successfully connected to Neo4j database
2025-03-08 12:08:02,388 - __main__ - INFO - Current database stats - Nodes: 0, Relationships: 0
2025-03-08 12:08:02,389 - __main__ - INFO - Neo4j free tier limits - Nodes: 200000, Relationships: 250000
2025-03-08 12:08:02,390 - __main__ - ERROR - Fatal error: Can't instantiate abstract class UMLSProcessorEmbeddings with abstract methods preprocess_data, process_dataset, validate_data
2025-03-08 12:08:02,391 - __main__ - INFO - UMLS processing with embeddings completed
2025-03-08 12:10:43,036 - __main__ - INFO - Successfully connected to Neo4j database
2025-03-08 12:10:43,260 - __main__ - INFO - Current database stats - Nodes: 0, Relationships: 0
2025-03-08 12:10:43,262 - __main__ - INFO - Neo4j free tier limits - Nodes: 200000, Relationships: 250000
2025-03-08 12:10:43,306 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-03-08 12:10:43,307 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: emilyalsentzer/Bio_ClinicalBERT
2025-03-08 12:10:43,478 - sentence_transformers.SentenceTransformer - WARNING - No sentence-transformers model found with name emilyalsentzer/Bio_ClinicalBERT. Creating a new one with mean pooling.
2025-03-08 12:10:45,094 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownLabelWarning} {category: UNRECOGNIZED} {title: The provided label is not in the database.} {description: One of the labels in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing label name is: Concept)} {position: line: 2, column: 22, offset: 22} for query: '\n            MATCH (c:Concept) \n            RETURN c.cui as cui, c.source as source, c.priority as priority\n            '
2025-03-08 12:10:45,095 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownPropertyKeyWarning} {category: UNRECOGNIZED} {title: The provided property key is not in the database} {description: One of the property names in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing property name is: cui)} {position: line: 3, column: 22, offset: 53} for query: '\n            MATCH (c:Concept) \n            RETURN c.cui as cui, c.source as source, c.priority as priority\n            '
2025-03-08 12:10:45,096 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownPropertyKeyWarning} {category: UNRECOGNIZED} {title: The provided property key is not in the database} {description: One of the property names in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing property name is: source)} {position: line: 3, column: 36, offset: 67} for query: '\n            MATCH (c:Concept) \n            RETURN c.cui as cui, c.source as source, c.priority as priority\n            '
2025-03-08 12:10:45,097 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownPropertyKeyWarning} {category: UNRECOGNIZED} {title: The provided property key is not in the database} {description: One of the property names in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing property name is: priority)} {position: line: 3, column: 56, offset: 87} for query: '\n            MATCH (c:Concept) \n            RETURN c.cui as cui, c.source as source, c.priority as priority\n            '
2025-03-08 12:10:45,246 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownLabelWarning} {category: UNRECOGNIZED} {title: The provided label is not in the database.} {description: One of the labels in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing label name is: Concept)} {position: line: 2, column: 23, offset: 23} for query: '\n            MATCH (c1:Concept)-[r]->(c2:Concept)\n            RETURN type(r) as rel_type, c1.cui as source_cui, c2.cui as target_cui\n            '
2025-03-08 12:10:45,247 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownLabelWarning} {category: UNRECOGNIZED} {title: The provided label is not in the database.} {description: One of the labels in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing label name is: Concept)} {position: line: 2, column: 41, offset: 41} for query: '\n            MATCH (c1:Concept)-[r]->(c2:Concept)\n            RETURN type(r) as rel_type, c1.cui as source_cui, c2.cui as target_cui\n            '
2025-03-08 12:10:45,248 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownPropertyKeyWarning} {category: UNRECOGNIZED} {title: The provided property key is not in the database} {description: One of the property names in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing property name is: cui)} {position: line: 3, column: 44, offset: 93} for query: '\n            MATCH (c1:Concept)-[r]->(c2:Concept)\n            RETURN type(r) as rel_type, c1.cui as source_cui, c2.cui as target_cui\n            '
2025-03-08 12:10:45,249 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownPropertyKeyWarning} {category: UNRECOGNIZED} {title: The provided property key is not in the database} {description: One of the property names in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing property name is: cui)} {position: line: 3, column: 66, offset: 115} for query: '\n            MATCH (c1:Concept)-[r]->(c2:Concept)\n            RETURN type(r) as rel_type, c1.cui as source_cui, c2.cui as target_cui\n            '
2025-03-08 12:10:45,386 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownLabelWarning} {category: UNRECOGNIZED} {title: The provided label is not in the database.} {description: One of the labels in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing label name is: Concept)} {position: line: 2, column: 22, offset: 22} for query: '\n            MATCH (c:Concept)-[:HAS_SEMANTIC_TYPE]->(s:SemanticType)\n            RETURN c.cui as cui, s.semantic_type as semantic_type\n            '
2025-03-08 12:10:45,388 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownRelationshipTypeWarning} {category: UNRECOGNIZED} {title: The provided relationship type is not in the database.} {description: One of the relationship types in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing relationship type is: HAS_SEMANTIC_TYPE)} {position: line: 2, column: 33, offset: 33} for query: '\n            MATCH (c:Concept)-[:HAS_SEMANTIC_TYPE]->(s:SemanticType)\n            RETURN c.cui as cui, s.semantic_type as semantic_type\n            '
2025-03-08 12:10:45,389 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownPropertyKeyWarning} {category: UNRECOGNIZED} {title: The provided property key is not in the database} {description: One of the property names in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing property name is: cui)} {position: line: 3, column: 22, offset: 91} for query: '\n            MATCH (c:Concept)-[:HAS_SEMANTIC_TYPE]->(s:SemanticType)\n            RETURN c.cui as cui, s.semantic_type as semantic_type\n            '
2025-03-08 12:10:45,390 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownPropertyKeyWarning} {category: UNRECOGNIZED} {title: The provided property key is not in the database} {description: One of the property names in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing property name is: semantic_type)} {position: line: 3, column: 36, offset: 105} for query: '\n            MATCH (c:Concept)-[:HAS_SEMANTIC_TYPE]->(s:SemanticType)\n            RETURN c.cui as cui, s.semantic_type as semantic_type\n            '
2025-03-08 12:10:45,391 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownLabelWarning} {category: UNRECOGNIZED} {title: The provided label is not in the database.} {description: One of the labels in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing label name is: SemanticType)} {position: line: 2, column: 56, offset: 56} for query: '\n            MATCH (c:Concept)-[:HAS_SEMANTIC_TYPE]->(s:SemanticType)\n            RETURN c.cui as cui, s.semantic_type as semantic_type\n            '
2025-03-08 12:10:45,434 - src.processors.umls_processor_embeddings - INFO - Loaded 0 existing concepts, 0 relationships, 0 semantic type mappings
2025-03-08 12:10:45,435 - __main__ - INFO - Initialized UMLSProcessorEmbeddings for ALL
2025-03-08 12:10:45,436 - __main__ - INFO - Using tiered filtering with 9 tier 1 concepts, 13 tier 1 relationships
2025-03-08 12:10:45,436 - __main__ - INFO - Starting full UMLS knowledge graph build for ALL...
2025-03-08 12:10:45,437 - src.processors.umls_processor_embeddings - INFO - Starting USMLE ALL knowledge graph build
2025-03-08 12:10:45,622 - src.processors.umls_processor_embeddings - ERROR - Error creating index: {code: Neo.ClientError.Statement.SyntaxError} {message: Invalid input 'IS': expected 'NOT EXISTS', 'IF NOT EXISTS' or 'FOR' (line 1, column 17 (offset: 16))
"CREATE INDEX IF IS NULL(c.cui) FOR (c:Concept) ON (c.cui)"
                 ^}
2025-03-08 12:10:45,766 - src.processors.umls_processor_embeddings - ERROR - Error creating index: {code: Neo.ClientError.Statement.SyntaxError} {message: Invalid input 'IS': expected 'NOT EXISTS', 'IF NOT EXISTS' or 'FOR' (line 1, column 17 (offset: 16))
"CREATE INDEX IF IS NULL(c.term) FOR (c:Concept) ON (c.term)"
                 ^}
2025-03-08 12:10:45,856 - src.processors.umls_processor_embeddings - ERROR - Error creating index: {code: Neo.ClientError.Statement.SyntaxError} {message: Invalid input 'IS': expected 'NOT EXISTS', 'IF NOT EXISTS' or 'FOR' (line 1, column 17 (offset: 16))
"CREATE INDEX IF IS NULL(d.def_id) FOR (d:Definition) ON (d.def_id)"
                 ^}
2025-03-08 12:10:45,946 - src.processors.umls_processor_embeddings - ERROR - Error creating index: {code: Neo.ClientError.Statement.SyntaxError} {message: Invalid input 'IS': expected 'NOT EXISTS', 'IF NOT EXISTS' or 'FOR' (line 1, column 17 (offset: 16))
"CREATE INDEX IF IS NULL(st.type_id) FOR (st:SemanticType) ON (st.type_id)"
                 ^}
2025-03-08 12:10:46,140 - src.processors.umls_processor_embeddings - ERROR - Error creating vector index: {code: Neo.ClientError.Procedure.ProcedureNotFound} {message: There is no procedure with the name `db.indexes` registered for this database instance. Please ensure you've spelled the procedure name correctly and that the procedure is properly deployed.}
2025-03-08 12:10:46,141 - src.processors.umls_processor_embeddings - ERROR - Error building USMLE knowledge graph: {code: Neo.ClientError.Procedure.ProcedureNotFound} {message: There is no procedure with the name `db.indexes` registered for this database instance. Please ensure you've spelled the procedure name correctly and that the procedure is properly deployed.}
2025-03-08 12:10:46,142 - __main__ - ERROR - Knowledge graph build failed: {code: Neo.ClientError.Procedure.ProcedureNotFound} {message: There is no procedure with the name `db.indexes` registered for this database instance. Please ensure you've spelled the procedure name correctly and that the procedure is properly deployed.}
2025-03-08 12:10:46,150 - __main__ - INFO - 
Testing vector similarity search...
2025-03-08 12:10:46,808 - src.processors.umls_processor_embeddings - ERROR - Error in vector similarity search: {code: Neo.ClientError.Procedure.ProcedureCallFailed} {message: Failed to invoke procedure `db.index.vector.queryNodes`: Caused by: java.lang.IllegalArgumentException: There is no such vector schema index: concept_embeddings}
2025-03-08 12:10:47,036 - __main__ - INFO - Final database stats - Nodes: 0, Relationships: 0
2025-03-08 12:10:47,038 - __main__ - INFO - UMLS processing with embeddings completed
2025-03-08 12:14:59,154 - __main__ - INFO - Successfully connected to Neo4j database
2025-03-08 12:14:59,375 - __main__ - INFO - Current database stats - Nodes: 0, Relationships: 0
2025-03-08 12:14:59,375 - __main__ - INFO - Neo4j free tier limits - Nodes: 200000, Relationships: 250000
2025-03-08 12:14:59,402 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda
2025-03-08 12:14:59,403 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: emilyalsentzer/Bio_ClinicalBERT
2025-03-08 12:14:59,546 - sentence_transformers.SentenceTransformer - WARNING - No sentence-transformers model found with name emilyalsentzer/Bio_ClinicalBERT. Creating a new one with mean pooling.
2025-03-08 12:15:00,766 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownLabelWarning} {category: UNRECOGNIZED} {title: The provided label is not in the database.} {description: One of the labels in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing label name is: Concept)} {position: line: 2, column: 22, offset: 22} for query: '\n            MATCH (c:Concept) \n            RETURN c.cui as cui, c.source as source, c.priority as priority\n            '
2025-03-08 12:15:00,767 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownPropertyKeyWarning} {category: UNRECOGNIZED} {title: The provided property key is not in the database} {description: One of the property names in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing property name is: cui)} {position: line: 3, column: 22, offset: 53} for query: '\n            MATCH (c:Concept) \n            RETURN c.cui as cui, c.source as source, c.priority as priority\n            '
2025-03-08 12:15:00,768 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownPropertyKeyWarning} {category: UNRECOGNIZED} {title: The provided property key is not in the database} {description: One of the property names in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing property name is: source)} {position: line: 3, column: 36, offset: 67} for query: '\n            MATCH (c:Concept) \n            RETURN c.cui as cui, c.source as source, c.priority as priority\n            '
2025-03-08 12:15:00,768 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownPropertyKeyWarning} {category: UNRECOGNIZED} {title: The provided property key is not in the database} {description: One of the property names in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing property name is: priority)} {position: line: 3, column: 56, offset: 87} for query: '\n            MATCH (c:Concept) \n            RETURN c.cui as cui, c.source as source, c.priority as priority\n            '
2025-03-08 12:15:00,898 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownLabelWarning} {category: UNRECOGNIZED} {title: The provided label is not in the database.} {description: One of the labels in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing label name is: Concept)} {position: line: 2, column: 23, offset: 23} for query: '\n            MATCH (c1:Concept)-[r]->(c2:Concept)\n            RETURN type(r) as rel_type, c1.cui as source_cui, c2.cui as target_cui\n            '
2025-03-08 12:15:00,899 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownLabelWarning} {category: UNRECOGNIZED} {title: The provided label is not in the database.} {description: One of the labels in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing label name is: Concept)} {position: line: 2, column: 41, offset: 41} for query: '\n            MATCH (c1:Concept)-[r]->(c2:Concept)\n            RETURN type(r) as rel_type, c1.cui as source_cui, c2.cui as target_cui\n            '
2025-03-08 12:15:00,900 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownPropertyKeyWarning} {category: UNRECOGNIZED} {title: The provided property key is not in the database} {description: One of the property names in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing property name is: cui)} {position: line: 3, column: 44, offset: 93} for query: '\n            MATCH (c1:Concept)-[r]->(c2:Concept)\n            RETURN type(r) as rel_type, c1.cui as source_cui, c2.cui as target_cui\n            '
2025-03-08 12:15:00,901 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownPropertyKeyWarning} {category: UNRECOGNIZED} {title: The provided property key is not in the database} {description: One of the property names in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing property name is: cui)} {position: line: 3, column: 66, offset: 115} for query: '\n            MATCH (c1:Concept)-[r]->(c2:Concept)\n            RETURN type(r) as rel_type, c1.cui as source_cui, c2.cui as target_cui\n            '
2025-03-08 12:15:01,030 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownLabelWarning} {category: UNRECOGNIZED} {title: The provided label is not in the database.} {description: One of the labels in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing label name is: Concept)} {position: line: 2, column: 22, offset: 22} for query: '\n            MATCH (c:Concept)-[:HAS_SEMANTIC_TYPE]->(s:SemanticType)\n            RETURN c.cui as cui, s.semantic_type as semantic_type\n            '
2025-03-08 12:15:01,031 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownRelationshipTypeWarning} {category: UNRECOGNIZED} {title: The provided relationship type is not in the database.} {description: One of the relationship types in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing relationship type is: HAS_SEMANTIC_TYPE)} {position: line: 2, column: 33, offset: 33} for query: '\n            MATCH (c:Concept)-[:HAS_SEMANTIC_TYPE]->(s:SemanticType)\n            RETURN c.cui as cui, s.semantic_type as semantic_type\n            '
2025-03-08 12:15:01,031 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownPropertyKeyWarning} {category: UNRECOGNIZED} {title: The provided property key is not in the database} {description: One of the property names in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing property name is: cui)} {position: line: 3, column: 22, offset: 91} for query: '\n            MATCH (c:Concept)-[:HAS_SEMANTIC_TYPE]->(s:SemanticType)\n            RETURN c.cui as cui, s.semantic_type as semantic_type\n            '
2025-03-08 12:15:01,032 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownPropertyKeyWarning} {category: UNRECOGNIZED} {title: The provided property key is not in the database} {description: One of the property names in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing property name is: semantic_type)} {position: line: 3, column: 36, offset: 105} for query: '\n            MATCH (c:Concept)-[:HAS_SEMANTIC_TYPE]->(s:SemanticType)\n            RETURN c.cui as cui, s.semantic_type as semantic_type\n            '
2025-03-08 12:15:01,032 - neo4j.notifications - WARNING - Received notification from DBMS server: {severity: WARNING} {code: Neo.ClientNotification.Statement.UnknownLabelWarning} {category: UNRECOGNIZED} {title: The provided label is not in the database.} {description: One of the labels in your query is not available in the database, make sure you didn't misspell it or that the label is available when you run this statement in your application (the missing label name is: SemanticType)} {position: line: 2, column: 56, offset: 56} for query: '\n            MATCH (c:Concept)-[:HAS_SEMANTIC_TYPE]->(s:SemanticType)\n            RETURN c.cui as cui, s.semantic_type as semantic_type\n            '
2025-03-08 12:15:01,075 - src.processors.umls_processor_embeddings - INFO - Loaded 0 existing concepts, 0 relationships, 0 semantic type mappings
2025-03-08 12:15:01,075 - __main__ - INFO - Initialized UMLSProcessorEmbeddings for ALL
2025-03-08 12:15:01,076 - __main__ - INFO - Using tiered filtering with 9 tier 1 concepts, 13 tier 1 relationships
2025-03-08 12:15:01,076 - __main__ - INFO - Starting full UMLS knowledge graph build for ALL...
2025-03-08 12:15:01,076 - src.processors.umls_processor_embeddings - INFO - Starting USMLE ALL knowledge graph build
2025-03-08 12:15:01,859 - src.processors.umls_processor_embeddings - ERROR - Error creating vector index: {code: Neo.ClientError.Procedure.ProcedureNotFound} {message: There is no procedure with the name `dbms.procedures` registered for this database instance. Please ensure you've spelled the procedure name correctly and that the procedure is properly deployed.}
2025-03-08 12:15:01,860 - src.processors.umls_processor_embeddings - WARNING - Continuing without vector index. Vector search will not be available.
2025-03-08 12:15:01,972 - src.processors.umls_processor_embeddings - INFO - Starting with 0 nodes in database
2025-03-08 12:23:20,573 - __main__ - INFO - UMLS processing with embeddings completed
